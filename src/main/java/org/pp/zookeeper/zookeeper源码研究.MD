# 分布式理论
    CAP
    Consistency             一致性
    Availability            可用性
    Partition Tolerance     分区容错性
    
    为什么分布式的分区容错性可以实现：网络具有共享、连通特性
    
    BASE
    Basically Available(基本可用)
        分布式系统在出现故障的时候，允许损失部分可用性，即保证核心可用。
    Soft state（软状态）
        允许系统中的数据存在中间状态,并认为该状态不影响系统的整体可用性,即允许系统在多个不同节点的数据副本存在数据延迟。
    Eventually consistent（最终一致性）
        尽可能保证在某个时间级别（比如秒级别）之后，可以让数据达到一致性状态。
# 分布式事务
    概念与方式
    访问由多个服务器管理的对象的平面事务或嵌套事务称为分布式事务（distributed transaction） 。
    FAQ. 平面事务，嵌套事务？？
    当一个分布式事务结束时，事务的原子特性要求所有参与该事务的服务器必须全部提交或全部放弃该事务。为了实现这一点，需要其中一个
    服务器承担协调者（coordinater）的角色来进行控制，协调者的工作方式取决于他选用的协议。
    
    原子提交协议
        两阶段提交
            1. 是否全部参与者准备好提交 2. 全部提交或放弃
        嵌入式事务的两阶段提交
            嵌套事务树  顶层事务--子事务1 子事务11 子事务12 子事务2 子事务21 子事务22 ...  
            整个事务是否提交由顶层事务决定，子事务临时提交（本地状态的改变，可以不用备份到持久化存储）。
            
            层次化两阶段提交
            顶层事务协调者按树的层次结构依次向子事务协调者发送canCommit消息。每个参与者首先收集其后代事务的应答，然后再应答
            自己的父事务，父事务决定子事务是否提交或放弃。
            
            平面化两阶段提交
                顶层事务协调者向临时提交列表中所有子事务的协调者发送canCommit消息，每个参与者都引用顶层事务TID来引用事务
                每个参与者都查找自己的事务列表，寻找匹配那个TID的事务或子事务。
                TID: 事务协调者标识符id
    分布式事务并发控制
        加锁与死锁（死锁检测：事务等待图中寻找环路）
        乐观锁：事务提交前验证
        
# zookeeper是什么
    为什么你会这么问？什么是什么典型的形式科学思维。。。
    
        ZooKeeper是维护配置信息、命名、提供分布式同步和组服务于一体的服务，这些服务都以某种形式被分布式应用程序使用。
    每次zookeeper被(分布式应用)发现时，都会进行大量工作来修复一些漏洞和竟态条件。zookeeper实现复杂，这使得它们在发生改变时
    变得很脆弱并且难于管理。即使正常运行了zookeeper，在部署应用时，zookeeper服务的不同实现也会导致管理的复杂性。
    
    配置信息：zookeeper服务器节点注册
    命名：节点命名和查找
    分布式同步：并发控制
    
    FAQ. 软件脆弱性？？
         
     ZooKeeper的目的是将这些不同服务的本质提炼成一个非常简单的界面，以实现集中式协调服务。服务本身是分布式的，并且高度可靠。
     共识，组管理和状态协议将由服务实现，因此应用程序不需要自己实现它们。
     
     FAQ. zookeeper(服务)的实现方式？？
    
      
# 参考资料
* 分布式系统：概念与设计 原书第5版
* 系统编程  分布式应用的设计与开发
* https://zookeeper.apache.org/
* https://cwiki.apache.org/confluence/display/ZOOKEEPER/Index
* 从Paxos到Zookeeper--分布式一致性原理与实践
* ZooKeeper分布式过程协同技术详解






